{% extends "core/base.html" %}

{% block title %}TÃ³picos{% endblock %}
{% block content %}
    <!--<div class="mb-2">
        <form class="form-inline my-2 my-lg-0"> 
            <input class="form-control mr-sm-2" type="search" placeholder="Buscar..." aria-label="Search" name="buscar" value="{{request.GET.buscar}}">
            <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Buscar</button>
        </form>
    </div>-->
    <form class="my-2 my-lg-0" method="GET">
        <div class="input-group mb-3">
            <input type="text" class="form-control" placeholder="Buscar..." aria-label="Buscar" name="buscar" value="{{request.GET.buscar}}">
            <div class="input-group-append">
                <button class="btn btn-outline-success" type="submit">Buscar</button>
            </div>
        </div>
    </form>
    <!--<div class="row">
        {% for topico in seccion.topicos.all %}
            <div class="col-sm-3">
                <div class="card mb-3">
                <div class="card-body">
                    <h5 class="card-title">{{topico.nombre}}</h5>
                    <p class="card-text">{{seccion.descripcion}}</p>
                    <a href="{% url 'subtopicos' topico.id %}" class="btn btn-primary btn-block">Ver</a>
                </div>
                </div>
            </div>

        {% endfor %}-->
        <div class="row">
            {% for topico in topicos %}
                <div class="col-sm-4">
                    <div class="card mb-3">
                        <img class="card-img-top" height="210" src="{% if topico.imagen %}{{topico.imagen.url}}{% endif %}" alt="Card image cap">
                        <div class="card-body">
                            <h5 class="card-title">{{topico.nombre}}</h5>
                            <!--<p class="card-text">{{seccion.descripcion}}</p>-->
                            {% if topico.url_infografia %}
                                <a href="{% url 'infografia' topico.id %}" class="stretched-link"></a>
                            {% else %}
                                <a href="{% url 'top_controlador' topico.id %}" class="stretched-link"></a>
                            {% endif %}
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
        <div id="topicos" class="row">

        </div>
        <script>
            /*var jsonData = JSON.parse('{{ data | safe }}');
            var cards = '';
            jsonData.forEach(element => {
                //console.log(element.fields.nombre);
                var url = "{% url 'top_controlador' 999 %}".replace(999, element.pk.toString());
                cards+= `
                    <div class="col-sm-4">
                        <div class="card mb-3">
                            <img class="card-img-top" src="https://familiados.com/blog/wp-content/uploads/2018/02/caminando-trasera-del-parque-natural-de-ir_1098-4247.jpg" alt="Card image cap">
                            <div class="card-body">
                                <h5 class="card-title">${element.fields.nombre}</h5>
                                <!--<p class="card-text"></p>-->
                                <a href=${url} class="stretched-link"></a>
                            </div>
                        </div>
                    </div>`;
                 });
            //$('#topicos').html(cards);*/
        </script>
{% endblock  %}
